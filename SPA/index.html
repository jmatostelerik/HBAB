<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Hit By A Bus</title>
	<meta charset="utf-8">

	<style>
		.node { stroke: #fff; stroke-width: 1.5px; }
		.link { stroke: #999; stroke-opacity: .6; }
	</style>

</head>
<body>

	<button data-role="Business">Show Only "Business"</button>
	<button data-role="Engineering">Show Only "Engineering"</button>
	<button data-role="Design">Show Only "Design"</button>

	<script src="lib/jquery-1.10.2.min.js"></script>
	<script src="lib/d3.v3.js"></script>
	<script src="scripts/ForceGraph.js"></script>
	<script src="scripts/FakeNetworkRepository.js"></script>
	<script>
		
		var strengthScale = d3.scale.linear().domain([0, 15]);
		var distanceScale = d3.scale.linear().domain([20, 50]);
		var color = d3.scale.category20();
		var optionyThing = {
			charge: function () { return -90; },
			nodeFilter: function (node){
				return node.UID % 2 === 0;
			},
			linkDistance: function(link) {
				return distanceScale(link.relationship.weight) * 200;
			},
			linkStrength: function(link) {
				return strengthScale(link.relationship.weight) * 0.5;
			},
			strokeWidth: function(link) {
				return Math.sqrt(link.relationship.weight);
			},
			nodeColor: function(node) {
				return color(node.person.team);
			}
		};

		$(document).ready(function(){
			NetworkRepository.CallWithNetworkData({}, function(error, graph) {
				window.forceGraph = newForceGraph(graph, "body", 1000, 1000);
				forceGraph.update(optionyThing);
			});
		});

	</script>
</body>
</html>