<!DOCTYPE HTML>
<html lang="en">
<head>
	<title>Hit By A Bus</title>
	<meta charset="utf-8">
	<link rel="stylesheet" href="assets/style.css">
</head>
<body>

	<div id="graph"></div>

	<div id="controls">

		<label>Colorize</label>
		<select class="colorizeSelect">
			<option>Team</option>
			<option>Location</option>
			<option>Role</option>
		</select>

		<label>Group</label>
		<select class="groupSelect">
			<option>Team</option>
			<option>Location</option>
			<option>Role</option>
		</select>

		<label>Filter</label>
		<select class="filterSelect">
			<option>Team</option>
			<option>Location</option>
			<option>Role</option>
		</select>
	</div>

	<script src="lib/jquery-1.10.2.min.js"></script>
	<script src="lib/d3.v3.js"></script>
	<script src="scripts/ForceGraph.js"></script>
	<script src="scripts/FakeNetworkRepository.js"></script>
	<script>
		
		var strengthScale = d3.scale.linear().domain([0, 15]);
		var distanceScale = d3.scale.linear().domain([20, 50]);
		var color = d3.scale.category20();
		var optionyThing = {
			charge: function () { return -90; },
			nodeFilter: function (node){
				return true;
			},
			linkDistance: function(link) {
				return distanceScale(link.relationship.weight) * 200;
			},
			linkStrength: function(link) {
				return strengthScale(link.relationship.weight) * 0.5;
			},
			strokeWidth: function(link) {
				return Math.sqrt(link.relationship.weight);
			},
			nodeColor: function(node) {
				return color(node.person.team);
			}
		};

		$(document).ready(function(){
			NetworkRepository.CallWithNetworkData({}, function(error, graph) {
				window.forceGraph = newForceGraph(graph, "#graph", $(window).innerHeight(), $(window).innerWidth());
				forceGraph.update(optionyThing);
			});
		});

	</script>
</body>
</html>
